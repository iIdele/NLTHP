{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { PureComponent } from 'react';\nimport warning from 'warning';\nimport PropTypes from 'prop-types';\nimport Rail from '../Rail';\nimport Ticks from '../Ticks';\nimport Tracks from '../Tracks';\nimport Handles from '../Handles';\nimport { mode1, mode2, mode3 } from './modes';\nimport { isNotValidTouch, getTouchPosition, getUpdatedValues, getSliderDomain, getStepRange, getSortByVal } from './utils';\nimport LinearScale from './LinearScale';\nimport DiscreteScale from './DiscreteScale';\nvar prfx = 'react-compound-slider:';\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nvar noop = function noop() {};\n\nvar compare = function compare(b) {\n  return function (m, d, i) {\n    return m && b[i] === d;\n  };\n};\n\nvar equal = function equal(a, b) {\n  return a === b || a.length === b.length && a.reduce(compare(b), true);\n};\n\nvar getNextValue = function getNextValue(curr, step, domain, reversed) {\n  var newVal = curr;\n  newVal = reversed ? curr - step : curr + step;\n  return reversed ? Math.max(domain[0], newVal) : Math.min(domain[1], newVal);\n};\n\nvar getPrevValue = function getPrevValue(curr, step, domain, reversed) {\n  var newVal = curr;\n  newVal = reversed ? curr + step : curr - step;\n  return reversed ? Math.min(domain[1], newVal) : Math.max(domain[0], newVal);\n};\n\nvar Slider = function (_PureComponent) {\n  _inherits(Slider, _PureComponent);\n\n  function Slider(props) {\n    _classCallCheck(this, Slider);\n\n    var _this = _possibleConstructorReturn(this, _PureComponent.call(this, props));\n\n    _this.state = {\n      values: []\n    };\n    _this.slider = null;\n    _this.valueToPerc = new LinearScale();\n    _this.valueToStep = new DiscreteScale();\n    _this.pixelToStep = new DiscreteScale();\n    _this.onMouseMove = _this.onMouseMove.bind(_this);\n    _this.onTouchMove = _this.onTouchMove.bind(_this);\n    _this.submitUpdate = _this.submitUpdate.bind(_this);\n    _this.onMouseDown = _this.onMouseDown.bind(_this);\n    _this.onTouchStart = _this.onTouchStart.bind(_this);\n    _this.onKeyDown = _this.onKeyDown.bind(_this);\n    _this.onStart = _this.onStart.bind(_this);\n    _this.onMouseUp = _this.onMouseUp.bind(_this);\n    _this.onTouchEnd = _this.onTouchEnd.bind(_this);\n    return _this;\n  }\n\n  Slider.prototype.componentWillMount = function componentWillMount() {\n    var _props = this.props,\n        values = _props.values,\n        domain = _props.domain,\n        step = _props.step,\n        reversed = _props.reversed;\n    this.updateRange(domain, step, reversed);\n    this.setValues(values, reversed);\n  };\n\n  Slider.prototype.componentWillReceiveProps = function componentWillReceiveProps(next) {\n    var domain = next.domain,\n        step = next.step,\n        reversed = next.reversed,\n        values = next.values;\n    var props = this.props;\n\n    if (domain[0] !== props.domain[0] || domain[1] !== props.domain[1] || step !== props.step || reversed !== props.reversed) {\n      this.updateRange(domain, step, reversed); // after adjusting the range based on the changed domain or step, make sure to update the values\n      // to fit with the new range\n\n      var remapped = this.reMapValues(reversed, values);\n\n      if (values === undefined || values === props.values) {\n        next.onChange(remapped);\n        next.onUpdate(remapped);\n      }\n    } else if (!equal(values, props.values)) {\n      // if domain didnt change, but the value props did, set the values\n      this.setValues(values, reversed);\n    }\n  };\n\n  Slider.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.removeListeners();\n  };\n\n  Slider.prototype.removeListeners = function removeListeners() {\n    if (isBrowser) {\n      document.removeEventListener('mousemove', this.onMouseMove);\n      document.removeEventListener('mouseup', this.onMouseUp);\n      document.removeEventListener('touchmove', this.onTouchMove);\n      document.removeEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  Slider.prototype.reMapValues = function reMapValues(reversed, values) {\n    // if values was not passed, fall back to using state\n    return this.setValues(values || this.state.values.map(function (d) {\n      return d.val;\n    }), reversed);\n  };\n\n  Slider.prototype.setValues = function setValues() {\n    var _this2 = this;\n\n    var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var reversed = arguments[1];\n    var changes = 0;\n    var values = arr.map(function (x) {\n      var val = _this2.valueToStep.getValue(x);\n\n      if (x !== val) {\n        changes += 1;\n        warning(false, prfx + ' Invalid value encountered. Changing ' + x + ' to ' + val + '.');\n      }\n\n      return val;\n    }).map(function (val, i) {\n      return {\n        key: '$$-' + i,\n        val: val\n      };\n    }).sort(getSortByVal(reversed));\n    var valuesArr = values.map(function (d) {\n      return d.val;\n    });\n\n    if (changes > 0) {\n      this.props.onUpdate(valuesArr);\n      this.props.onChange(valuesArr);\n    }\n\n    this.setState(function () {\n      return {\n        values: values\n      };\n    });\n    return valuesArr;\n  };\n\n  Slider.prototype.updateRange = function updateRange(_ref, step, reversed) {\n    var min = _ref[0],\n        max = _ref[1];\n    var range = getStepRange(min, max, step);\n    this.valueToStep.setRange(range).setDomain([min - step / 2, max + step / 2]);\n\n    if (reversed === true) {\n      this.valueToPerc.setDomain([min, max]).setRange([100, 0]);\n      range.reverse();\n    } else {\n      this.valueToPerc.setDomain([min, max]).setRange([0, 100]);\n    }\n\n    this.pixelToStep.setRange(range);\n    warning(max > min, prfx + ' Max must be greater than min (even if reversed). Max is ' + max + '. Min is ' + min + '.');\n    var maxInRange = 100001;\n    warning(range.length <= maxInRange, prfx + ' Increase step value (set to ' + step + ' currently). Found ' + range.length.toLocaleString() + ' values in range. Max is ' + maxInRange.toLocaleString() + '.');\n    var last = range.length - 1;\n    warning(range[reversed ? last : 0] === min && range[reversed ? 0 : last] === max, prfx + ' The range is incorrectly calculated. Check domain (min, max) and step values.');\n  };\n\n  Slider.prototype.onKeyDown = function onKeyDown(e, handleID) {\n    var validUpKeys = ['ArrowRight', 'ArrowUp'];\n    var validDownKeys = ['ArrowDown', 'ArrowLeft'];\n    var values = this.state.values,\n        _props2 = this.props,\n        step = _props2.step,\n        reversed = _props2.reversed,\n        vertical = _props2.vertical,\n        domain = _props2.domain;\n    var key = e.key || e.keyCode;\n\n    if (!validUpKeys.concat(validDownKeys).includes(key)) {\n      return;\n    }\n\n    if (vertical) {\n      var _ref2 = [validDownKeys, validUpKeys];\n      validUpKeys = _ref2[0];\n      validDownKeys = _ref2[1];\n    }\n\n    e.stopPropagation && e.stopPropagation();\n    e.preventDefault && e.preventDefault();\n    var found = values.find(function (value) {\n      return value.key === handleID;\n    });\n\n    if (!found) {\n      return;\n    }\n\n    var currVal = found.val;\n    var newVal = currVal;\n\n    if (validUpKeys.includes(key)) {\n      newVal = getNextValue(currVal, step, domain, reversed);\n    } else if (validDownKeys.includes(key)) {\n      newVal = getPrevValue(currVal, step, domain, reversed);\n    }\n\n    var nextValues = values.map(function (v) {\n      return v.key === handleID ? {\n        key: v.key,\n        val: newVal\n      } : v;\n    });\n    this.submitUpdate(nextValues, true);\n  };\n\n  Slider.prototype.onMouseDown = function onMouseDown(e, handleID) {\n    this.onStart(e, handleID, false);\n  };\n\n  Slider.prototype.onTouchStart = function onTouchStart(e, handleID) {\n    if (isNotValidTouch(e)) {\n      return;\n    }\n\n    this.onStart(e, handleID, true);\n  };\n\n  Slider.prototype.onStart = function onStart(e, handleID, isTouch) {\n    var values = this.state.values,\n        onSlideStart = this.props.onSlideStart;\n    e.stopPropagation && e.stopPropagation();\n    e.preventDefault && e.preventDefault();\n    var found = values.find(function (value) {\n      return value.key === handleID;\n    });\n\n    if (found) {\n      this.active = handleID;\n      onSlideStart(values.map(function (d) {\n        return d.val;\n      }), {\n        activeHandleID: handleID\n      });\n      isTouch ? this.addTouchEvents() : this.addMouseEvents();\n    } else {\n      this.active = null;\n      this.handleRailAndTrackClicks(e, isTouch);\n    }\n  };\n\n  Slider.prototype.handleRailAndTrackClicks = function handleRailAndTrackClicks(e, isTouch) {\n    var curr = this.state.values,\n        _props3 = this.props,\n        vertical = _props3.vertical,\n        reversed = _props3.reversed;\n    var slider = this.slider; // double check the dimensions of the slider\n\n    this.pixelToStep.setDomain(getSliderDomain(slider, vertical, this.pixelToStep)); // find the closest value (aka step) to the event location\n\n    var updateValue = void 0;\n\n    if (isTouch) {\n      updateValue = this.pixelToStep.getValue(getTouchPosition(vertical, e));\n    } else {\n      updateValue = this.pixelToStep.getValue(vertical ? e.clientY : e.pageX);\n    } // find the closest handle key\n\n\n    var updateKey = null;\n    var minDiff = Infinity;\n\n    for (var i = 0; i < curr.length; i++) {\n      var _curr$i = curr[i],\n          key = _curr$i.key,\n          val = _curr$i.val;\n      var diff = Math.abs(val - updateValue);\n\n      if (diff < minDiff) {\n        updateKey = key;\n        minDiff = diff;\n      }\n    } // generate a \"candidate\" set of values - a suggestion of what to do\n\n\n    var nextValues = getUpdatedValues(curr, updateKey, updateValue, reversed); // submit the candidate values\n\n    this.submitUpdate(nextValues, true);\n  };\n\n  Slider.prototype.addMouseEvents = function addMouseEvents() {\n    if (isBrowser) {\n      document.addEventListener('mousemove', this.onMouseMove);\n      document.addEventListener('mouseup', this.onMouseUp);\n    }\n  };\n\n  Slider.prototype.addTouchEvents = function addTouchEvents() {\n    if (isBrowser) {\n      document.addEventListener('touchmove', this.onTouchMove);\n      document.addEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  Slider.prototype.onMouseMove = function onMouseMove(e) {\n    var curr = this.state.values,\n        _props4 = this.props,\n        vertical = _props4.vertical,\n        reversed = _props4.reversed;\n    var updateKey = this.active,\n        slider = this.slider; // double check the dimensions of the slider\n\n    this.pixelToStep.setDomain(getSliderDomain(slider, vertical, this.pixelToStep)); // find the closest value (aka step) to the event location\n\n    var updateValue = this.pixelToStep.getValue(vertical ? e.clientY : e.pageX); // generate a \"candidate\" set of values - a suggestion of what to do\n\n    var nextValues = getUpdatedValues(curr, updateKey, updateValue, reversed); // submit the candidate values\n\n    this.submitUpdate(nextValues);\n  };\n\n  Slider.prototype.onTouchMove = function onTouchMove(e) {\n    var curr = this.state.values,\n        _props5 = this.props,\n        vertical = _props5.vertical,\n        reversed = _props5.reversed;\n    var updateKey = this.active,\n        slider = this.slider;\n\n    if (isNotValidTouch(e)) {\n      return;\n    } // double check the dimensions of the slider\n\n\n    this.pixelToStep.setDomain(getSliderDomain(slider, vertical, this.pixelToStep)); // find the closest value (aka step) to the event location\n\n    var updateValue = this.pixelToStep.getValue(getTouchPosition(vertical, e)); // generate a \"candidate\" set of values - a suggestion of what to do\n\n    var nextValues = getUpdatedValues(curr, updateKey, updateValue, reversed); // submit the candidate values\n\n    this.submitUpdate(nextValues);\n  };\n\n  Slider.prototype.submitUpdate = function submitUpdate(next, callOnChange) {\n    var _props6 = this.props,\n        mode = _props6.mode,\n        step = _props6.step,\n        onUpdate = _props6.onUpdate,\n        onChange = _props6.onChange,\n        reversed = _props6.reversed;\n    var getValue = this.valueToStep.getValue;\n    this.setState(function (_ref3) {\n      var curr = _ref3.values;\n      var values = void 0; // given the current values and a candidate set, decide what to do\n\n      if (typeof mode === 'function') {\n        values = mode(curr, next, step, reversed, getValue);\n        warning(Array.isArray(values), 'Custom mode function did not return an array.');\n      } else {\n        switch (mode) {\n          case 1:\n            values = mode1(curr, next);\n            break;\n\n          case 2:\n            values = mode2(curr, next);\n            break;\n\n          case 3:\n            values = mode3(curr, next, step, reversed, getValue);\n            break;\n\n          default:\n            values = next;\n            warning(false, prfx + ' Invalid mode value.');\n        }\n      }\n\n      onUpdate(values.map(function (d) {\n        return d.val;\n      }));\n\n      if (callOnChange) {\n        onChange(values.map(function (d) {\n          return d.val;\n        }));\n      }\n\n      return {\n        values: values\n      };\n    });\n  };\n\n  Slider.prototype.onMouseUp = function onMouseUp() {\n    var values = this.state.values,\n        _props7 = this.props,\n        onChange = _props7.onChange,\n        onSlideEnd = _props7.onSlideEnd;\n    var activeHandleID = this.active;\n    this.active = null;\n    onChange(values.map(function (d) {\n      return d.val;\n    }));\n    onSlideEnd(values.map(function (d) {\n      return d.val;\n    }), {\n      activeHandleID: activeHandleID\n    });\n\n    if (isBrowser) {\n      document.removeEventListener('mousemove', this.onMouseMove);\n      document.removeEventListener('mouseup', this.onMouseUp);\n    }\n  };\n\n  Slider.prototype.onTouchEnd = function onTouchEnd() {\n    var values = this.state.values,\n        _props8 = this.props,\n        onChange = _props8.onChange,\n        onSlideEnd = _props8.onSlideEnd;\n    this.active = null;\n    onChange(values.map(function (d) {\n      return d.val;\n    }));\n    onSlideEnd(values.map(function (d) {\n      return d.val;\n    }));\n\n    if (isBrowser) {\n      document.removeEventListener('touchmove', this.onTouchMove);\n      document.removeEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  Slider.prototype.render = function render() {\n    var _this3 = this;\n\n    var values = this.state.values,\n        _props9 = this.props,\n        className = _props9.className,\n        rootStyle = _props9.rootStyle;\n    var handles = values.map(function (_ref4) {\n      var key = _ref4.key,\n          val = _ref4.val;\n      return {\n        id: key,\n        value: val,\n        percent: _this3.valueToPerc.getValue(val)\n      };\n    });\n    var children = React.Children.map(this.props.children, function (child) {\n      if (child.type.name === Rail.name || child.type.name === Ticks.name || child.type.name === Tracks.name || child.type.name === Handles.name) {\n        return React.cloneElement(child, {\n          scale: _this3.valueToPerc,\n          handles: handles,\n          emitKeyboard: _this3.onKeyDown,\n          emitMouse: _this3.onMouseDown,\n          emitTouch: _this3.onTouchStart\n        });\n      }\n\n      return child;\n    });\n    return React.createElement('div', {\n      style: rootStyle || {},\n      className: className,\n      ref: function ref(d) {\n        return _this3.slider = d;\n      }\n    }, children);\n  };\n\n  return Slider;\n}(PureComponent);\n\nSlider.propTypes = {\n  /**\n   * CSS class name applied to the root div of the slider.\n   */\n  className: PropTypes.string,\n\n  /**\n   * An object with any inline styles you want applied to the root div.\n   */\n  rootStyle: PropTypes.object,\n\n  /**\n   * Two element array of numbers providing the min and max values for the slider [min, max] e.g. [0, 100].\n   * It does not matter if the slider is reversed on the screen, domain is always [min, max] with min < max.\n   */\n  domain: PropTypes.array,\n\n  /**\n   * An array of numbers. You can supply one for a value slider, two for a range slider or more to create n-handled sliders.\n   * The values should correspond to valid step values in the domain.\n   * The numbers will be forced into the domain if they are two small or large.\n   */\n  values: PropTypes.array,\n\n  /**\n   * The step value for the slider.\n   */\n  step: PropTypes.number,\n\n  /**\n   * The interaction mode. Value of 1 will allow handles to cross each other.\n   * Value of 2 will keep the sliders from crossing and separated by a step.\n   * Value of 3 will make the handles pushable and keep them a step apart.\n   * ADVANCED: You can also supply a function that will be passed the current values and the incoming update.\n   * Your function should return what the state should be set as.\n   */\n  mode: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n\n  /**\n   * Set to true if the slider is displayed vertically to tell the slider to use the height to calculate positions.\n   */\n  vertical: PropTypes.bool,\n\n  /**\n   * Reverse the display of slider values.\n   */\n  reversed: PropTypes.bool,\n\n  /**\n   * Function triggered when the value of the slider has changed. This will recieve changes at the end of a slide as well as changes from clicks on rails and tracks. Receives values.\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * Function called with the values at each update (caution: high-volume updates when dragging). Receives values.\n   */\n  onUpdate: PropTypes.func,\n\n  /**\n   * Function triggered with ontouchstart or onmousedown on a handle. Receives values.\n   */\n  onSlideStart: PropTypes.func,\n\n  /**\n   * Function triggered on ontouchend or onmouseup on a handle. Receives values.\n   */\n  onSlideEnd: PropTypes.func,\n\n  /**\n   * Component children to render\n   */\n  children: PropTypes.any\n};\nSlider.defaultProps = {\n  mode: 1,\n  step: 0.1,\n  domain: [0, 100],\n  vertical: false,\n  reversed: false,\n  onChange: noop,\n  onUpdate: noop,\n  onSlideStart: noop,\n  onSlideEnd: noop\n};\nexport default Slider;","map":{"version":3,"sources":["C:/Users/manny/fyp/node_modules/react-compound-slider/es/Slider/Slider.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","React","PureComponent","warning","PropTypes","Rail","Ticks","Tracks","Handles","mode1","mode2","mode3","isNotValidTouch","getTouchPosition","getUpdatedValues","getSliderDomain","getStepRange","getSortByVal","LinearScale","DiscreteScale","prfx","isBrowser","window","document","noop","compare","b","m","d","i","equal","a","length","reduce","getNextValue","curr","step","domain","reversed","newVal","Math","max","min","getPrevValue","Slider","_PureComponent","props","_this","state","values","slider","valueToPerc","valueToStep","pixelToStep","onMouseMove","bind","onTouchMove","submitUpdate","onMouseDown","onTouchStart","onKeyDown","onStart","onMouseUp","onTouchEnd","componentWillMount","_props","updateRange","setValues","componentWillReceiveProps","next","remapped","reMapValues","undefined","onChange","onUpdate","componentWillUnmount","removeListeners","removeEventListener","map","val","_this2","arr","arguments","changes","x","getValue","key","sort","valuesArr","setState","_ref","range","setRange","setDomain","reverse","maxInRange","toLocaleString","last","e","handleID","validUpKeys","validDownKeys","_props2","vertical","keyCode","concat","includes","_ref2","stopPropagation","preventDefault","found","find","currVal","nextValues","v","isTouch","onSlideStart","active","activeHandleID","addTouchEvents","addMouseEvents","handleRailAndTrackClicks","_props3","updateValue","clientY","pageX","updateKey","minDiff","Infinity","_curr$i","diff","abs","addEventListener","_props4","_props5","callOnChange","_props6","mode","_ref3","Array","isArray","_props7","onSlideEnd","_props8","render","_this3","_props9","className","rootStyle","handles","_ref4","id","percent","children","Children","child","type","name","cloneElement","scale","emitKeyboard","emitMouse","emitTouch","createElement","style","ref","propTypes","string","object","array","number","oneOfType","func","bool","any","defaultProps"],"mappings":"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","sourcesContent":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { PureComponent } from 'react';\nimport warning from 'warning';\nimport PropTypes from 'prop-types';\nimport Rail from '../Rail';\nimport Ticks from '../Ticks';\nimport Tracks from '../Tracks';\nimport Handles from '../Handles';\nimport { mode1, mode2, mode3 } from './modes';\nimport { isNotValidTouch, getTouchPosition, getUpdatedValues, getSliderDomain, getStepRange, getSortByVal } from './utils';\nimport LinearScale from './LinearScale';\nimport DiscreteScale from './DiscreteScale';\n\nvar prfx = 'react-compound-slider:';\n\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nvar noop = function noop() {};\n\nvar compare = function compare(b) {\n  return function (m, d, i) {\n    return m && b[i] === d;\n  };\n};\n\nvar equal = function equal(a, b) {\n  return a === b || a.length === b.length && a.reduce(compare(b), true);\n};\n\nvar getNextValue = function getNextValue(curr, step, domain, reversed) {\n  var newVal = curr;\n  newVal = reversed ? curr - step : curr + step;\n  return reversed ? Math.max(domain[0], newVal) : Math.min(domain[1], newVal);\n};\n\nvar getPrevValue = function getPrevValue(curr, step, domain, reversed) {\n  var newVal = curr;\n  newVal = reversed ? curr + step : curr - step;\n  return reversed ? Math.min(domain[1], newVal) : Math.max(domain[0], newVal);\n};\n\nvar Slider = function (_PureComponent) {\n  _inherits(Slider, _PureComponent);\n\n  function Slider(props) {\n    _classCallCheck(this, Slider);\n\n    var _this = _possibleConstructorReturn(this, _PureComponent.call(this, props));\n\n    _this.state = { values: [] };\n\n    _this.slider = null;\n\n    _this.valueToPerc = new LinearScale();\n    _this.valueToStep = new DiscreteScale();\n    _this.pixelToStep = new DiscreteScale();\n\n    _this.onMouseMove = _this.onMouseMove.bind(_this);\n    _this.onTouchMove = _this.onTouchMove.bind(_this);\n    _this.submitUpdate = _this.submitUpdate.bind(_this);\n\n    _this.onMouseDown = _this.onMouseDown.bind(_this);\n    _this.onTouchStart = _this.onTouchStart.bind(_this);\n    _this.onKeyDown = _this.onKeyDown.bind(_this);\n    _this.onStart = _this.onStart.bind(_this);\n\n    _this.onMouseUp = _this.onMouseUp.bind(_this);\n    _this.onTouchEnd = _this.onTouchEnd.bind(_this);\n    return _this;\n  }\n\n  Slider.prototype.componentWillMount = function componentWillMount() {\n    var _props = this.props,\n        values = _props.values,\n        domain = _props.domain,\n        step = _props.step,\n        reversed = _props.reversed;\n\n\n    this.updateRange(domain, step, reversed);\n    this.setValues(values, reversed);\n  };\n\n  Slider.prototype.componentWillReceiveProps = function componentWillReceiveProps(next) {\n    var domain = next.domain,\n        step = next.step,\n        reversed = next.reversed,\n        values = next.values;\n    var props = this.props;\n\n\n    if (domain[0] !== props.domain[0] || domain[1] !== props.domain[1] || step !== props.step || reversed !== props.reversed) {\n      this.updateRange(domain, step, reversed);\n      // after adjusting the range based on the changed domain or step, make sure to update the values\n      // to fit with the new range\n      var remapped = this.reMapValues(reversed, values);\n\n      if (values === undefined || values === props.values) {\n        next.onChange(remapped);\n        next.onUpdate(remapped);\n      }\n    } else if (!equal(values, props.values)) {\n      // if domain didnt change, but the value props did, set the values\n      this.setValues(values, reversed);\n    }\n  };\n\n  Slider.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.removeListeners();\n  };\n\n  Slider.prototype.removeListeners = function removeListeners() {\n    if (isBrowser) {\n      document.removeEventListener('mousemove', this.onMouseMove);\n      document.removeEventListener('mouseup', this.onMouseUp);\n      document.removeEventListener('touchmove', this.onTouchMove);\n      document.removeEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  Slider.prototype.reMapValues = function reMapValues(reversed, values) {\n    // if values was not passed, fall back to using state\n    return this.setValues(values || this.state.values.map(function (d) {\n      return d.val;\n    }), reversed);\n  };\n\n  Slider.prototype.setValues = function setValues() {\n    var _this2 = this;\n\n    var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var reversed = arguments[1];\n\n    var changes = 0;\n\n    var values = arr.map(function (x) {\n      var val = _this2.valueToStep.getValue(x);\n\n      if (x !== val) {\n        changes += 1;\n        warning(false, prfx + ' Invalid value encountered. Changing ' + x + ' to ' + val + '.');\n      }\n\n      return val;\n    }).map(function (val, i) {\n      return { key: '$$-' + i, val: val };\n    }).sort(getSortByVal(reversed));\n\n    var valuesArr = values.map(function (d) {\n      return d.val;\n    });\n\n    if (changes > 0) {\n      this.props.onUpdate(valuesArr);\n      this.props.onChange(valuesArr);\n    }\n\n    this.setState(function () {\n      return { values: values };\n    });\n\n    return valuesArr;\n  };\n\n  Slider.prototype.updateRange = function updateRange(_ref, step, reversed) {\n    var min = _ref[0],\n        max = _ref[1];\n\n    var range = getStepRange(min, max, step);\n\n    this.valueToStep.setRange(range).setDomain([min - step / 2, max + step / 2]);\n\n    if (reversed === true) {\n      this.valueToPerc.setDomain([min, max]).setRange([100, 0]);\n      range.reverse();\n    } else {\n      this.valueToPerc.setDomain([min, max]).setRange([0, 100]);\n    }\n\n    this.pixelToStep.setRange(range);\n\n    warning(max > min, prfx + ' Max must be greater than min (even if reversed). Max is ' + max + '. Min is ' + min + '.');\n\n    var maxInRange = 100001;\n\n    warning(range.length <= maxInRange, prfx + ' Increase step value (set to ' + step + ' currently). Found ' + range.length.toLocaleString() + ' values in range. Max is ' + maxInRange.toLocaleString() + '.');\n\n    var last = range.length - 1;\n\n    warning(range[reversed ? last : 0] === min && range[reversed ? 0 : last] === max, prfx + ' The range is incorrectly calculated. Check domain (min, max) and step values.');\n  };\n\n  Slider.prototype.onKeyDown = function onKeyDown(e, handleID) {\n    var validUpKeys = ['ArrowRight', 'ArrowUp'];\n    var validDownKeys = ['ArrowDown', 'ArrowLeft'];\n    var values = this.state.values,\n        _props2 = this.props,\n        step = _props2.step,\n        reversed = _props2.reversed,\n        vertical = _props2.vertical,\n        domain = _props2.domain;\n\n    var key = e.key || e.keyCode;\n\n    if (!validUpKeys.concat(validDownKeys).includes(key)) {\n      return;\n    }\n\n    if (vertical) {\n      var _ref2 = [validDownKeys, validUpKeys];\n      validUpKeys = _ref2[0];\n      validDownKeys = _ref2[1];\n    }\n\n    e.stopPropagation && e.stopPropagation();\n    e.preventDefault && e.preventDefault();\n\n    var found = values.find(function (value) {\n      return value.key === handleID;\n    });\n    if (!found) {\n      return;\n    }\n\n    var currVal = found.val;\n    var newVal = currVal;\n\n    if (validUpKeys.includes(key)) {\n      newVal = getNextValue(currVal, step, domain, reversed);\n    } else if (validDownKeys.includes(key)) {\n      newVal = getPrevValue(currVal, step, domain, reversed);\n    }\n    var nextValues = values.map(function (v) {\n      return v.key === handleID ? { key: v.key, val: newVal } : v;\n    });\n\n    this.submitUpdate(nextValues, true);\n  };\n\n  Slider.prototype.onMouseDown = function onMouseDown(e, handleID) {\n    this.onStart(e, handleID, false);\n  };\n\n  Slider.prototype.onTouchStart = function onTouchStart(e, handleID) {\n    if (isNotValidTouch(e)) {\n      return;\n    }\n\n    this.onStart(e, handleID, true);\n  };\n\n  Slider.prototype.onStart = function onStart(e, handleID, isTouch) {\n    var values = this.state.values,\n        onSlideStart = this.props.onSlideStart;\n\n\n    e.stopPropagation && e.stopPropagation();\n    e.preventDefault && e.preventDefault();\n\n    var found = values.find(function (value) {\n      return value.key === handleID;\n    });\n\n    if (found) {\n      this.active = handleID;\n      onSlideStart(values.map(function (d) {\n        return d.val;\n      }), { activeHandleID: handleID });\n      isTouch ? this.addTouchEvents() : this.addMouseEvents();\n    } else {\n      this.active = null;\n      this.handleRailAndTrackClicks(e, isTouch);\n    }\n  };\n\n  Slider.prototype.handleRailAndTrackClicks = function handleRailAndTrackClicks(e, isTouch) {\n    var curr = this.state.values,\n        _props3 = this.props,\n        vertical = _props3.vertical,\n        reversed = _props3.reversed;\n    var slider = this.slider;\n\n    // double check the dimensions of the slider\n\n    this.pixelToStep.setDomain(getSliderDomain(slider, vertical, this.pixelToStep));\n\n    // find the closest value (aka step) to the event location\n    var updateValue = void 0;\n\n    if (isTouch) {\n      updateValue = this.pixelToStep.getValue(getTouchPosition(vertical, e));\n    } else {\n      updateValue = this.pixelToStep.getValue(vertical ? e.clientY : e.pageX);\n    }\n\n    // find the closest handle key\n    var updateKey = null;\n    var minDiff = Infinity;\n\n    for (var i = 0; i < curr.length; i++) {\n      var _curr$i = curr[i],\n          key = _curr$i.key,\n          val = _curr$i.val;\n\n      var diff = Math.abs(val - updateValue);\n\n      if (diff < minDiff) {\n        updateKey = key;\n        minDiff = diff;\n      }\n    }\n\n    // generate a \"candidate\" set of values - a suggestion of what to do\n    var nextValues = getUpdatedValues(curr, updateKey, updateValue, reversed);\n\n    // submit the candidate values\n    this.submitUpdate(nextValues, true);\n  };\n\n  Slider.prototype.addMouseEvents = function addMouseEvents() {\n    if (isBrowser) {\n      document.addEventListener('mousemove', this.onMouseMove);\n      document.addEventListener('mouseup', this.onMouseUp);\n    }\n  };\n\n  Slider.prototype.addTouchEvents = function addTouchEvents() {\n    if (isBrowser) {\n      document.addEventListener('touchmove', this.onTouchMove);\n      document.addEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  Slider.prototype.onMouseMove = function onMouseMove(e) {\n    var curr = this.state.values,\n        _props4 = this.props,\n        vertical = _props4.vertical,\n        reversed = _props4.reversed;\n    var updateKey = this.active,\n        slider = this.slider;\n\n    // double check the dimensions of the slider\n\n    this.pixelToStep.setDomain(getSliderDomain(slider, vertical, this.pixelToStep));\n\n    // find the closest value (aka step) to the event location\n    var updateValue = this.pixelToStep.getValue(vertical ? e.clientY : e.pageX);\n\n    // generate a \"candidate\" set of values - a suggestion of what to do\n    var nextValues = getUpdatedValues(curr, updateKey, updateValue, reversed);\n\n    // submit the candidate values\n    this.submitUpdate(nextValues);\n  };\n\n  Slider.prototype.onTouchMove = function onTouchMove(e) {\n    var curr = this.state.values,\n        _props5 = this.props,\n        vertical = _props5.vertical,\n        reversed = _props5.reversed;\n    var updateKey = this.active,\n        slider = this.slider;\n\n\n    if (isNotValidTouch(e)) {\n      return;\n    }\n\n    // double check the dimensions of the slider\n    this.pixelToStep.setDomain(getSliderDomain(slider, vertical, this.pixelToStep));\n\n    // find the closest value (aka step) to the event location\n    var updateValue = this.pixelToStep.getValue(getTouchPosition(vertical, e));\n\n    // generate a \"candidate\" set of values - a suggestion of what to do\n    var nextValues = getUpdatedValues(curr, updateKey, updateValue, reversed);\n\n    // submit the candidate values\n    this.submitUpdate(nextValues);\n  };\n\n  Slider.prototype.submitUpdate = function submitUpdate(next, callOnChange) {\n    var _props6 = this.props,\n        mode = _props6.mode,\n        step = _props6.step,\n        onUpdate = _props6.onUpdate,\n        onChange = _props6.onChange,\n        reversed = _props6.reversed;\n    var getValue = this.valueToStep.getValue;\n\n\n    this.setState(function (_ref3) {\n      var curr = _ref3.values;\n\n      var values = void 0;\n\n      // given the current values and a candidate set, decide what to do\n      if (typeof mode === 'function') {\n        values = mode(curr, next, step, reversed, getValue);\n        warning(Array.isArray(values), 'Custom mode function did not return an array.');\n      } else {\n        switch (mode) {\n          case 1:\n            values = mode1(curr, next);\n            break;\n          case 2:\n            values = mode2(curr, next);\n            break;\n          case 3:\n            values = mode3(curr, next, step, reversed, getValue);\n            break;\n          default:\n            values = next;\n            warning(false, prfx + ' Invalid mode value.');\n        }\n      }\n\n      onUpdate(values.map(function (d) {\n        return d.val;\n      }));\n\n      if (callOnChange) {\n        onChange(values.map(function (d) {\n          return d.val;\n        }));\n      }\n\n      return { values: values };\n    });\n  };\n\n  Slider.prototype.onMouseUp = function onMouseUp() {\n    var values = this.state.values,\n        _props7 = this.props,\n        onChange = _props7.onChange,\n        onSlideEnd = _props7.onSlideEnd;\n\n    var activeHandleID = this.active;\n    this.active = null;\n\n    onChange(values.map(function (d) {\n      return d.val;\n    }));\n    onSlideEnd(values.map(function (d) {\n      return d.val;\n    }), { activeHandleID: activeHandleID });\n\n    if (isBrowser) {\n      document.removeEventListener('mousemove', this.onMouseMove);\n      document.removeEventListener('mouseup', this.onMouseUp);\n    }\n  };\n\n  Slider.prototype.onTouchEnd = function onTouchEnd() {\n    var values = this.state.values,\n        _props8 = this.props,\n        onChange = _props8.onChange,\n        onSlideEnd = _props8.onSlideEnd;\n\n    this.active = null;\n\n    onChange(values.map(function (d) {\n      return d.val;\n    }));\n    onSlideEnd(values.map(function (d) {\n      return d.val;\n    }));\n\n    if (isBrowser) {\n      document.removeEventListener('touchmove', this.onTouchMove);\n      document.removeEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  Slider.prototype.render = function render() {\n    var _this3 = this;\n\n    var values = this.state.values,\n        _props9 = this.props,\n        className = _props9.className,\n        rootStyle = _props9.rootStyle;\n\n\n    var handles = values.map(function (_ref4) {\n      var key = _ref4.key,\n          val = _ref4.val;\n\n      return { id: key, value: val, percent: _this3.valueToPerc.getValue(val) };\n    });\n\n    var children = React.Children.map(this.props.children, function (child) {\n      if (child.type.name === Rail.name || child.type.name === Ticks.name || child.type.name === Tracks.name || child.type.name === Handles.name) {\n        return React.cloneElement(child, {\n          scale: _this3.valueToPerc,\n          handles: handles,\n          emitKeyboard: _this3.onKeyDown,\n          emitMouse: _this3.onMouseDown,\n          emitTouch: _this3.onTouchStart\n        });\n      }\n\n      return child;\n    });\n\n    return React.createElement(\n      'div',\n      {\n        style: rootStyle || {},\n        className: className,\n        ref: function ref(d) {\n          return _this3.slider = d;\n        }\n      },\n      children\n    );\n  };\n\n  return Slider;\n}(PureComponent);\n\nSlider.propTypes = {\n  /**\n   * CSS class name applied to the root div of the slider.\n   */\n  className: PropTypes.string,\n  /**\n   * An object with any inline styles you want applied to the root div.\n   */\n  rootStyle: PropTypes.object,\n  /**\n   * Two element array of numbers providing the min and max values for the slider [min, max] e.g. [0, 100].\n   * It does not matter if the slider is reversed on the screen, domain is always [min, max] with min < max.\n   */\n  domain: PropTypes.array,\n  /**\n   * An array of numbers. You can supply one for a value slider, two for a range slider or more to create n-handled sliders.\n   * The values should correspond to valid step values in the domain.\n   * The numbers will be forced into the domain if they are two small or large.\n   */\n  values: PropTypes.array,\n  /**\n   * The step value for the slider.\n   */\n  step: PropTypes.number,\n  /**\n   * The interaction mode. Value of 1 will allow handles to cross each other.\n   * Value of 2 will keep the sliders from crossing and separated by a step.\n   * Value of 3 will make the handles pushable and keep them a step apart.\n   * ADVANCED: You can also supply a function that will be passed the current values and the incoming update.\n   * Your function should return what the state should be set as.\n   */\n  mode: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n  /**\n   * Set to true if the slider is displayed vertically to tell the slider to use the height to calculate positions.\n   */\n  vertical: PropTypes.bool,\n  /**\n   * Reverse the display of slider values.\n   */\n  reversed: PropTypes.bool,\n  /**\n   * Function triggered when the value of the slider has changed. This will recieve changes at the end of a slide as well as changes from clicks on rails and tracks. Receives values.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Function called with the values at each update (caution: high-volume updates when dragging). Receives values.\n   */\n  onUpdate: PropTypes.func,\n  /**\n   * Function triggered with ontouchstart or onmousedown on a handle. Receives values.\n   */\n  onSlideStart: PropTypes.func,\n  /**\n   * Function triggered on ontouchend or onmouseup on a handle. Receives values.\n   */\n  onSlideEnd: PropTypes.func,\n  /**\n   * Component children to render\n   */\n  children: PropTypes.any\n};\n\nSlider.defaultProps = {\n  mode: 1,\n  step: 0.1,\n  domain: [0, 100],\n  vertical: false,\n  reversed: false,\n  onChange: noop,\n  onUpdate: noop,\n  onSlideStart: noop,\n  onSlideEnd: noop\n};\n\nexport default Slider;"]},"metadata":{},"sourceType":"module"}