{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/manny/fyp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/manny/fyp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from\"react\";import{Button,Card,Container}from\"react-bootstrap\";import{useHistory,useLocation}from\"react-router-dom\";import{useAuth}from\"../../contexts/AuthContext\";import firebaseDb from\"../../firebase\";import Dashboard from'./Dashboard';/**\r\n * PlayerWin component to display Winning player\r\n * name and record user statistics.\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlayerWin(props){var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var history=useHistory();var search=useLocation().search;var difficulty=new URLSearchParams(search).get('difficulty');useEffect(function(){recordUserStatistics();});// Increase games played and/or wins for difficulty played\nfunction recordUserStatistics(_x){return _recordUserStatistics.apply(this,arguments);}/*\r\n     Return user to dashboard menu\r\n    */function _recordUserStatistics(){_recordUserStatistics=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var userStatistics;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userStatistics=new Object();firebaseDb.database().ref().child(currentUser.uid).once(\"value\").then(function(snapshot){var countValues=0;snapshot.forEach(function(childSnapshot){var key=childSnapshot.key;var childData=childSnapshot.val();userStatistics[key]=childData;countValues+=1;});if(countValues==0){firebaseDb.database().ref().child(currentUser.uid).set({\"num_beginner_games\":0,\"num_beginner_wins\":0,\"num_intermediate_games\":0,\"num_intermediate_wins\":0,\"num_expert_games\":0,\"num_expert_wins\":0,\"num_ultimate_games\":0,\"num_ultimate_wins\":0});userStatistics={\"num_beginner_games\":0,\"num_beginner_wins\":0,\"num_intermediate_games\":0,\"num_intermediate_wins\":0,\"num_expert_games\":0,\"num_expert_wins\":0,\"num_ultimate_games\":0,\"num_ultimate_wins\":0};}// Add results to DB\nif(difficulty==\"beginner\"){userStatistics[\"num_beginner_games\"]=userStatistics[\"num_beginner_games\"]+1;if(props.winner.name==Dashboard.username)userStatistics[\"num_beginner_wins\"]=userStatistics[\"num_beginner_wins\"]+1;}else if(difficulty==\"intermediate\"){userStatistics[\"num_intermediate_games\"]=userStatistics[\"num_intermediate_games\"]+1;if(props.winner.name==Dashboard.username)userStatistics[\"num_intermediate_wins\"]=userStatistics[\"num_intermediate_wins\"]+1;}else if(difficulty==\"expert\"){userStatistics[\"num_expert_games\"]=userStatistics[\"num_expert_games\"]+1;if(props.winner.name==Dashboard.username)userStatistics[\"num_expert_wins\"]=userStatistics[\"num_expert_wins\"]+1;}else if(difficulty==\"ultimate\"){userStatistics[\"num_ultimate_games\"]=userStatistics[\"num_ultimate_games\"]+1;if(props.winner.name==Dashboard.username)userStatistics[\"num_ultimate_wins\"]=userStatistics[\"num_ultimate_wins\"]+1;}firebaseDb.database().ref().child(currentUser.uid).set({\"num_beginner_games\":userStatistics[\"num_beginner_games\"],\"num_beginner_wins\":userStatistics[\"num_beginner_wins\"],\"num_intermediate_games\":userStatistics[\"num_intermediate_games\"],\"num_intermediate_wins\":userStatistics[\"num_intermediate_wins\"],\"num_expert_games\":userStatistics[\"num_expert_games\"],\"num_expert_wins\":userStatistics[\"num_expert_wins\"],\"num_ultimate_games\":userStatistics[\"num_ultimate_games\"],\"num_ultimate_wins\":userStatistics[\"num_ultimate_wins\"]});},function(error){console.log(\"Error reading player statistics from DB\");});case 2:case\"end\":return _context.stop();}}},_callee);}));return _recordUserStatistics.apply(this,arguments);}function handleReturnToDashboard(_x2){return _handleReturnToDashboard.apply(this,arguments);}function _handleReturnToDashboard(){_handleReturnToDashboard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(\"Returning to dashboard...\");try{history.push(\"/dashboard\");}catch(_unused){console.log(\"Error returning to dashboard. Please try again.\");}case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleReturnToDashboard.apply(this,arguments);}return/*#__PURE__*/_jsx(Container,{className:\"d-flex flex-column align-items-center justify-content-center\",style:{minHeight:\"100vh\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",style:{maxWidth:\"400px\"},children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-200 text-center\",children:/*#__PURE__*/_jsx(\"img\",{className:\"logo mr-2\",src:\"/assets/win-trophy.png\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100 m-100\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[props.winner.name,\" Wins!\"]})}),/*#__PURE__*/_jsx(Button,{className:\"w-100 mt-3\",onClick:handleReturnToDashboard,children:\"Return to Dashboard\"})]})})})});}","map":{"version":3,"sources":["C:/Users/manny/fyp/src/components/interfaces/PlayerWin.js"],"names":["React","useEffect","Button","Card","Container","useHistory","useLocation","useAuth","firebaseDb","Dashboard","PlayerWin","props","currentUser","history","search","difficulty","URLSearchParams","get","recordUserStatistics","e","userStatistics","Object","database","ref","child","uid","once","then","snapshot","countValues","forEach","childSnapshot","key","childData","val","set","winner","name","username","error","console","log","handleReturnToDashboard","preventDefault","push","minHeight","maxWidth"],"mappings":"+QAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,SAAvB,KAAwC,iBAAxC,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,gBAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA;AACA;AACA;AACA,G,wFACA,cAAe,SAASC,CAAAA,SAAT,CAAmBC,KAAnB,CAA0B,cACbJ,OAAO,EADM,CAC7BK,WAD6B,UAC7BA,WAD6B,CAErC,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAEA,GAAMS,CAAAA,MAAM,CAAGR,WAAW,GAAGQ,MAA7B,CACA,GAAMC,CAAAA,UAAU,CAAG,GAAIC,CAAAA,eAAJ,CAAoBF,MAApB,EAA4BG,GAA5B,CAAgC,YAAhC,CAAnB,CAGAhB,SAAS,CAAC,UAAM,CACZiB,oBAAoB,GACvB,CAFQ,CAAT,CAIA;AAZqC,QAatBA,CAAAA,oBAbsB,yDAwErC;AACJ;AACA,MA1EyC,+GAarC,iBAAoCC,CAApC,qIACQC,cADR,CACyB,GAAIC,CAAAA,MAAJ,EADzB,CAEIb,UAAU,CAACc,QAAX,GAAsBC,GAAtB,GAA4BC,KAA5B,CAAkCZ,WAAW,CAACa,GAA9C,EAAmDC,IAAnD,CAAwD,OAAxD,EAAiEC,IAAjE,CAAsE,SAAUC,QAAV,CAAoB,CACtF,GAAIC,CAAAA,WAAW,CAAG,CAAlB,CACAD,QAAQ,CAACE,OAAT,CAAiB,SAAUC,aAAV,CAAyB,CACtC,GAAIC,CAAAA,GAAG,CAAGD,aAAa,CAACC,GAAxB,CACA,GAAIC,CAAAA,SAAS,CAAGF,aAAa,CAACG,GAAd,EAAhB,CACAd,cAAc,CAACY,GAAD,CAAd,CAAsBC,SAAtB,CACAJ,WAAW,EAAI,CAAf,CACH,CALD,EAMA,GAAIA,WAAW,EAAI,CAAnB,CAAsB,CAClBrB,UAAU,CAACc,QAAX,GAAsBC,GAAtB,GAA4BC,KAA5B,CAAkCZ,WAAW,CAACa,GAA9C,EAAmDU,GAAnD,CAAuD,CACnD,qBAAsB,CAD6B,CAC1B,oBAAqB,CADK,CAEnD,yBAA0B,CAFyB,CAEtB,wBAAyB,CAFH,CAGnD,mBAAoB,CAH+B,CAG5B,kBAAmB,CAHS,CAInD,qBAAsB,CAJ6B,CAI1B,oBAAqB,CAJK,CAAvD,EAMAf,cAAc,CAAG,CACb,qBAAsB,CADT,CACY,oBAAqB,CADjC,CAEb,yBAA0B,CAFb,CAEgB,wBAAyB,CAFzC,CAGb,mBAAoB,CAHP,CAGU,kBAAmB,CAH7B,CAIb,qBAAsB,CAJT,CAIY,oBAAqB,CAJjC,CAAjB,CAMH,CAED;AACA,GAAIL,UAAU,EAAI,UAAlB,CAA8B,CAC1BK,cAAc,CAAC,oBAAD,CAAd,CAAuCA,cAAc,CAAC,oBAAD,CAAd,CAAuC,CAA9E,CACA,GAAIT,KAAK,CAACyB,MAAN,CAAaC,IAAb,EAAqB5B,SAAS,CAAC6B,QAAnC,CACIlB,cAAc,CAAC,mBAAD,CAAd,CAAsCA,cAAc,CAAC,mBAAD,CAAd,CAAsC,CAA5E,CACP,CAJD,IAKK,IAAIL,UAAU,EAAI,cAAlB,CAAkC,CACnCK,cAAc,CAAC,wBAAD,CAAd,CAA2CA,cAAc,CAAC,wBAAD,CAAd,CAA2C,CAAtF,CACA,GAAIT,KAAK,CAACyB,MAAN,CAAaC,IAAb,EAAqB5B,SAAS,CAAC6B,QAAnC,CACIlB,cAAc,CAAC,uBAAD,CAAd,CAA0CA,cAAc,CAAC,uBAAD,CAAd,CAA0C,CAApF,CACP,CAJI,IAKA,IAAIL,UAAU,EAAI,QAAlB,CAA4B,CAC7BK,cAAc,CAAC,kBAAD,CAAd,CAAqCA,cAAc,CAAC,kBAAD,CAAd,CAAqC,CAA1E,CACA,GAAIT,KAAK,CAACyB,MAAN,CAAaC,IAAb,EAAqB5B,SAAS,CAAC6B,QAAnC,CACIlB,cAAc,CAAC,iBAAD,CAAd,CAAoCA,cAAc,CAAC,iBAAD,CAAd,CAAoC,CAAxE,CACP,CAJI,IAKA,IAAIL,UAAU,EAAI,UAAlB,CAA8B,CAC/BK,cAAc,CAAC,oBAAD,CAAd,CAAuCA,cAAc,CAAC,oBAAD,CAAd,CAAuC,CAA9E,CACA,GAAIT,KAAK,CAACyB,MAAN,CAAaC,IAAb,EAAqB5B,SAAS,CAAC6B,QAAnC,CACIlB,cAAc,CAAC,mBAAD,CAAd,CAAsCA,cAAc,CAAC,mBAAD,CAAd,CAAsC,CAA5E,CACP,CAEDZ,UAAU,CAACc,QAAX,GAAsBC,GAAtB,GAA4BC,KAA5B,CAAkCZ,WAAW,CAACa,GAA9C,EAAmDU,GAAnD,CAAuD,CACnD,qBAAsBf,cAAc,CAAC,oBAAD,CADe,CACS,oBAAqBA,cAAc,CAAC,mBAAD,CAD5C,CAEnD,yBAA0BA,cAAc,CAAC,wBAAD,CAFW,CAEiB,wBAAyBA,cAAc,CAAC,uBAAD,CAFxD,CAGnD,mBAAoBA,cAAc,CAAC,kBAAD,CAHiB,CAGK,kBAAmBA,cAAc,CAAC,iBAAD,CAHtC,CAInD,qBAAsBA,cAAc,CAAC,oBAAD,CAJe,CAIS,oBAAqBA,cAAc,CAAC,mBAAD,CAJ5C,CAAvD,EAOH,CApDD,CAoDG,SAAUmB,KAAV,CAAiB,CAChBC,OAAO,CAACC,GAAR,CAAY,yCAAZ,EACH,CAtDD,EAFJ,sDAbqC,+DA2EtBC,CAAAA,uBA3EsB,kLA2ErC,kBAAuCvB,CAAvC,sHACIA,CAAC,CAACwB,cAAF,GACAH,OAAO,CAACC,GAAR,CAAY,2BAAZ,EACA,GAAI,CACA5B,OAAO,CAAC+B,IAAR,CAAa,YAAb,EACH,CAAC,cAAM,CACJJ,OAAO,CAACC,GAAR,CAAY,iDAAZ,EACH,CAPL,wDA3EqC,0DAqFrC,mBACI,KAAC,SAAD,EACI,SAAS,CAAC,8DADd,CAEI,KAAK,CAAE,CAAEI,SAAS,CAAE,OAAb,CAFX,uBAII,YAAK,SAAS,CAAC,OAAf,CAAuB,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAZ,CAA9B,uBACI,KAAC,IAAD,wBACI,MAAC,IAAD,CAAM,IAAN,yBACI,YAAK,SAAS,CAAC,mBAAf,uBACI,YAAK,SAAS,CAAC,WAAf,CAA2B,GAAG,CAAC,wBAA/B,EADJ,EADJ,cAII,YAAK,SAAS,CAAC,aAAf,uBACI,sBACKnC,KAAK,CAACyB,MAAN,CAAaC,IADlB,YADJ,EAJJ,cASI,KAAC,MAAD,EAAQ,SAAS,CAAC,YAAlB,CAA+B,OAAO,CAAEK,uBAAxC,iCATJ,GADJ,EADJ,EAJJ,EADJ,CAwBH","sourcesContent":["import React, { useEffect } from \"react\"\r\nimport { Button, Card, Container } from \"react-bootstrap\"\r\nimport { useHistory, useLocation } from \"react-router-dom\"\r\nimport { useAuth } from \"../../contexts/AuthContext\"\r\nimport firebaseDb from \"../../firebase\"\r\nimport Dashboard from './Dashboard'\r\n\r\n/**\r\n * PlayerWin component to display Winning player\r\n * name and record user statistics.\r\n */\r\nexport default function PlayerWin(props) {\r\n    const { currentUser } = useAuth()\r\n    const history = useHistory()\r\n\r\n    const search = useLocation().search;\r\n    const difficulty = new URLSearchParams(search).get('difficulty');\r\n\r\n\r\n    useEffect(() => {\r\n        recordUserStatistics()\r\n    });\r\n\r\n    // Increase games played and/or wins for difficulty played\r\n    async function recordUserStatistics(e) {\r\n        var userStatistics = new Object();\r\n        firebaseDb.database().ref().child(currentUser.uid).once(\"value\").then(function (snapshot) {\r\n            var countValues = 0;\r\n            snapshot.forEach(function (childSnapshot) {\r\n                var key = childSnapshot.key;\r\n                var childData = childSnapshot.val();\r\n                userStatistics[key] = childData;\r\n                countValues += 1;\r\n            });\r\n            if (countValues == 0) {\r\n                firebaseDb.database().ref().child(currentUser.uid).set({\r\n                    \"num_beginner_games\": 0, \"num_beginner_wins\": 0,\r\n                    \"num_intermediate_games\": 0, \"num_intermediate_wins\": 0,\r\n                    \"num_expert_games\": 0, \"num_expert_wins\": 0,\r\n                    \"num_ultimate_games\": 0, \"num_ultimate_wins\": 0,\r\n                })\r\n                userStatistics = {\r\n                    \"num_beginner_games\": 0, \"num_beginner_wins\": 0,\r\n                    \"num_intermediate_games\": 0, \"num_intermediate_wins\": 0,\r\n                    \"num_expert_games\": 0, \"num_expert_wins\": 0,\r\n                    \"num_ultimate_games\": 0, \"num_ultimate_wins\": 0,\r\n                }\r\n            }\r\n\r\n            // Add results to DB\r\n            if (difficulty == \"beginner\") {\r\n                userStatistics[\"num_beginner_games\"] = userStatistics[\"num_beginner_games\"] + 1\r\n                if (props.winner.name == Dashboard.username)\r\n                    userStatistics[\"num_beginner_wins\"] = userStatistics[\"num_beginner_wins\"] + 1\r\n            }\r\n            else if (difficulty == \"intermediate\") {\r\n                userStatistics[\"num_intermediate_games\"] = userStatistics[\"num_intermediate_games\"] + 1\r\n                if (props.winner.name == Dashboard.username)\r\n                    userStatistics[\"num_intermediate_wins\"] = userStatistics[\"num_intermediate_wins\"] + 1\r\n            }\r\n            else if (difficulty == \"expert\") {\r\n                userStatistics[\"num_expert_games\"] = userStatistics[\"num_expert_games\"] + 1\r\n                if (props.winner.name == Dashboard.username)\r\n                    userStatistics[\"num_expert_wins\"] = userStatistics[\"num_expert_wins\"] + 1\r\n            }\r\n            else if (difficulty == \"ultimate\") {\r\n                userStatistics[\"num_ultimate_games\"] = userStatistics[\"num_ultimate_games\"] + 1\r\n                if (props.winner.name == Dashboard.username)\r\n                    userStatistics[\"num_ultimate_wins\"] = userStatistics[\"num_ultimate_wins\"] + 1\r\n            }\r\n\r\n            firebaseDb.database().ref().child(currentUser.uid).set({\r\n                \"num_beginner_games\": userStatistics[\"num_beginner_games\"], \"num_beginner_wins\": userStatistics[\"num_beginner_wins\"],\r\n                \"num_intermediate_games\": userStatistics[\"num_intermediate_games\"], \"num_intermediate_wins\": userStatistics[\"num_intermediate_wins\"],\r\n                \"num_expert_games\": userStatistics[\"num_expert_games\"], \"num_expert_wins\": userStatistics[\"num_expert_wins\"],\r\n                \"num_ultimate_games\": userStatistics[\"num_ultimate_games\"], \"num_ultimate_wins\": userStatistics[\"num_ultimate_wins\"],\r\n            })\r\n\r\n        }, function (error) {\r\n            console.log(\"Error reading player statistics from DB\")\r\n        });\r\n    }\r\n\r\n    /*\r\n     Return user to dashboard menu\r\n    */\r\n    async function handleReturnToDashboard(e) {\r\n        e.preventDefault()\r\n        console.log(\"Returning to dashboard...\")\r\n        try {\r\n            history.push(\"/dashboard\")\r\n        } catch {\r\n            console.log(\"Error returning to dashboard. Please try again.\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container\r\n            className=\"d-flex flex-column align-items-center justify-content-center\"\r\n            style={{ minHeight: \"100vh\" }}\r\n        >\r\n            <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\r\n                <Card>\r\n                    <Card.Body>\r\n                        <div className=\"w-200 text-center\">\r\n                            <img className=\"logo mr-2\" src=\"/assets/win-trophy.png\" />\r\n                        </div>\r\n                        <div className=\"w-100 m-100\">\r\n                            <h2>\r\n                                {props.winner.name} Wins!\r\n                            </h2>\r\n                        </div>\r\n                        <Button className=\"w-100 mt-3\" onClick={handleReturnToDashboard}>\r\n                            Return to Dashboard\r\n                    </Button>\r\n                    </Card.Body>\r\n                </Card>\r\n            </div>\r\n        </Container>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}