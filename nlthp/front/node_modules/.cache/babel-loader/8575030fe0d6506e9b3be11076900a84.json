{"ast":null,"code":"import _slicedToArray from\"C:/Users/manny/2021-ca400-idelegi2-puzzuos2/src/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/manny/2021-ca400-idelegi2-puzzuos2/src/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/manny/2021-ca400-idelegi2-puzzuos2/src/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useState}from\"react\";import{Button,Card,Container,Alert}from\"react-bootstrap\";import{useAuth}from\"../../contexts/AuthContext\";import{useHistory}from\"react-router-dom\";import firebaseDb from\"../../firebase\";import Logo from'../helpers/Logo';import'../../Game.css';/**\r\n * UserStatistics component to allow users view\r\n * their individual game statistics.\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UserStatistics(_ref){var userStatistics=_ref.userStatistics;var history=useHistory();function handleReturnToDashboard(_x){return _handleReturnToDashboard.apply(this,arguments);}function _handleReturnToDashboard(){_handleReturnToDashboard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(\"Returning to dashboard...\");try{history.push(\"/dashboard\");}catch(_unused){console.log(\"Error returning to dashboard. Please try again.\");}case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleReturnToDashboard.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{class:\"content-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Played\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Difficulty\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Won\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",userStatistics.num_beginner_games]}),/*#__PURE__*/_jsx(\"td\",{children:\"Beginner\"}),/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_beginner_wins})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_intermediate_games}),/*#__PURE__*/_jsx(\"td\",{children:\"Intermediate\"}),/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_intermediate_wins})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_expert_games}),/*#__PURE__*/_jsx(\"td\",{children:\"Expert\"}),/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_expert_wins})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_ultimate_games}),/*#__PURE__*/_jsx(\"td\",{children:\"Ultimate Poker Pro\"}),/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_ultimate_wins})]}),/*#__PURE__*/_jsxs(\"tr\",{class:\"active-row\",children:[/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_beginner_games+userStatistics.num_intermediate_games+userStatistics.num_expert_games+userStatistics.num_ultimate_games}),/*#__PURE__*/_jsx(\"td\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"td\",{children:userStatistics.num_beginner_wins+userStatistics.num_intermediate_wins+userStatistics.num_expert_wins+userStatistics.num_ultimate_wins})]})]})]}),/*#__PURE__*/_jsx(Button,{className:\"w-100 mt-3\",onClick:handleReturnToDashboard,children:\"Return to Dashboard\"})]});}function GuestUserStatistics(_ref2){var userStatistics=_ref2.userStatistics;var history=useHistory();function handleReturnToDashboard(_x2){return _handleReturnToDashboard2.apply(this,arguments);}function _handleReturnToDashboard2(){_handleReturnToDashboard2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(\"Returning to dashboard...\");try{history.push(\"/dashboard\");}catch(_unused2){console.log(\"Error returning to dashboard. Please try again.\");}case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleReturnToDashboard2.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:\"No Statistics Recorded for Guest Users\"})}),/*#__PURE__*/_jsx(Button,{className:\"w-100 mt-3\",onClick:handleReturnToDashboard,children:\"Return to Dashboard\"})]});}export default function Statistics(props){var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(new Object()),_useState4=_slicedToArray(_useState3,2),userStats=_useState4[0],setUserStats=_useState4[1];var userStatistics=new Object();useEffect(function(){setUserStatistics();});function setUserStatistics(){return _setUserStatistics.apply(this,arguments);}function _setUserStatistics(){_setUserStatistics=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var countValues;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:countValues=0;// If email is guest email show message saying that as a guest player nos stats are recorded\nfirebaseDb.database().ref().child(currentUser.uid).once(\"value\").then(function(snapshot){console.log(\"snapshot\");console.log(snapshot);snapshot.forEach(function(childSnapshot){var key=childSnapshot.key;var childData=childSnapshot.val();userStatistics[key]=childData;countValues+=1;});if(countValues==0){userStatistics={\"num_beginner_games\":0,\"num_beginner_wins\":0,\"num_intermediate_games\":0,\"num_intermediate_wins\":0,\"num_expert_games\":0,\"num_expert_wins\":0,\"num_ultimate_games\":0,\"num_ultimate_wins\":0};}setUserStats(userStatistics);if(countValues==8){setLoading(false);}});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _setUserStatistics.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{className:\"d-flex flex-column align-items-center justify-content-center\",style:{minHeight:\"100vh\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-200 text-center\",children:/*#__PURE__*/_jsx(Logo,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100\",style:{maxWidth:\"400px\"},children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Personal Statistics\"}),currentUser.email==\"guest@guest.com\"?/*#__PURE__*/_jsx(GuestUserStatistics,{}):loading?\"Loading...\":/*#__PURE__*/_jsx(UserStatistics,{userStatistics:userStats})]})})})]})});}","map":{"version":3,"sources":["C:/Users/manny/2021-ca400-idelegi2-puzzuos2/src/ui/src/components/interfaces/Statistics.js"],"names":["React","useEffect","useState","Button","Card","Container","Alert","useAuth","useHistory","firebaseDb","Logo","UserStatistics","userStatistics","history","handleReturnToDashboard","e","preventDefault","console","log","push","num_beginner_games","num_beginner_wins","num_intermediate_games","num_intermediate_wins","num_expert_games","num_expert_wins","num_ultimate_games","num_ultimate_wins","GuestUserStatistics","Statistics","props","currentUser","loading","setLoading","Object","userStats","setUserStats","setUserStatistics","countValues","database","ref","child","uid","once","then","snapshot","forEach","childSnapshot","key","childData","val","minHeight","maxWidth","email"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { Button, Card, Container, Alert } from \"react-bootstrap\"\r\nimport { useAuth } from \"../../contexts/AuthContext\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport firebaseDb from \"../../firebase\"\r\nimport Logo from '../helpers/Logo';\r\nimport '../../Game.css';\r\n\r\n/**\r\n * UserStatistics component to allow users view\r\n * their individual game statistics.\r\n */\r\nfunction UserStatistics({ userStatistics }) {\r\n\r\n    const history = useHistory()\r\n\r\n    async function handleReturnToDashboard(e) {\r\n        e.preventDefault()\r\n        console.log(\"Returning to dashboard...\")\r\n        try {\r\n            history.push(\"/dashboard\")\r\n        } catch {\r\n            console.log(\"Error returning to dashboard. Please try again.\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <table class=\"content-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Played</th>\r\n                        <th>Difficulty</th>\r\n                        <th>Won</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td> {userStatistics.num_beginner_games}</td>\r\n                        <td>Beginner</td>\r\n                        <td>{userStatistics.num_beginner_wins}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>{userStatistics.num_intermediate_games}</td>\r\n                        <td>Intermediate</td>\r\n                        <td>{userStatistics.num_intermediate_wins}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>{userStatistics.num_expert_games}</td>\r\n                        <td>Expert</td>\r\n                        <td>{userStatistics.num_expert_wins}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>{userStatistics.num_ultimate_games}</td>\r\n                        <td>Ultimate Poker Pro</td>\r\n                        <td>{userStatistics.num_ultimate_wins}</td>\r\n                    </tr>\r\n                    <tr class=\"active-row\">\r\n                        <td>{userStatistics.num_beginner_games + userStatistics.num_intermediate_games + userStatistics.num_expert_games + userStatistics.num_ultimate_games}</td>\r\n                        <td>Total</td>\r\n                        <td>{userStatistics.num_beginner_wins + userStatistics.num_intermediate_wins + userStatistics.num_expert_wins + userStatistics.num_ultimate_wins}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <Button className=\"w-100 mt-3\" onClick={handleReturnToDashboard}>\r\n                Return to Dashboard\r\n            </Button>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction GuestUserStatistics({ userStatistics }) {\r\n    const history = useHistory()\r\n\r\n    async function handleReturnToDashboard(e) {\r\n        e.preventDefault()\r\n        console.log(\"Returning to dashboard...\")\r\n        try {\r\n            history.push(\"/dashboard\")\r\n        } catch {\r\n            console.log(\"Error returning to dashboard. Please try again.\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <div>No Statistics Recorded for Guest Users</div>\r\n            </div>\r\n            <Button className=\"w-100 mt-3\" onClick={handleReturnToDashboard}>\r\n                Return to Dashboard\r\n            </Button>\r\n        </>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default function Statistics(props) {\r\n    const { currentUser } = useAuth()\r\n    const [loading, setLoading] = useState(true);\r\n    const [userStats, setUserStats] = useState(new Object());\r\n    var userStatistics = new Object();\r\n\r\n    useEffect(() => {\r\n        setUserStatistics()\r\n    });\r\n\r\n    async function setUserStatistics() {\r\n\r\n        var countValues = 0;\r\n        // If email is guest email show message saying that as a guest player nos stats are recorded\r\n        firebaseDb.database().ref().child(currentUser.uid).once(\"value\").then(function (snapshot) {\r\n            console.log(\"snapshot\");\r\n            console.log(snapshot);\r\n            snapshot.forEach(function (childSnapshot) {\r\n                var key = childSnapshot.key;\r\n                var childData = childSnapshot.val();\r\n                userStatistics[key] = childData;\r\n                countValues += 1;\r\n\r\n            });\r\n\r\n            if (countValues == 0) {\r\n                userStatistics = {\r\n                    \"num_beginner_games\": 0, \"num_beginner_wins\": 0,\r\n                    \"num_intermediate_games\": 0, \"num_intermediate_wins\": 0,\r\n                    \"num_expert_games\": 0, \"num_expert_wins\": 0,\r\n                    \"num_ultimate_games\": 0, \"num_ultimate_wins\": 0,\r\n                }\r\n            }\r\n            setUserStats(userStatistics)\r\n\r\n            if (countValues == 8) {\r\n                setLoading(false);\r\n            }\r\n        }\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n\r\n            <Container\r\n                className=\"d-flex flex-column align-items-center justify-content-center\"\r\n                style={{ minHeight: \"100vh\" }}\r\n            >\r\n                <div className=\"w-200 text-center\">\r\n                    <Logo />\r\n                </div>\r\n                <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"text-center mb-4\">Personal Statistics</h2>\r\n\r\n                            {\r\n                                (currentUser.email == \"guest@guest.com\") ? <GuestUserStatistics /> :\r\n                                    (loading) ? \"Loading...\" : <UserStatistics userStatistics={userStats} />\r\n                            }\r\n\r\n                        </Card.Body>\r\n\r\n                    </Card>\r\n                </div>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}